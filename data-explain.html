<!DOCTYPE html>
<!-- saved from url=(0041)https://iot.wra.gov.tw/DataStatistics.jsp -->
<html lang="zh-hant">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>資料使用統計</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" href="scss/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

<body>
    <!-- 導覽列 -->
    <!-- Minibar -->
    <div class="minibar">
        <div class="container">
            <a href="https://iot.wra.gov.tw/DataStatistics.jsp#U" id="AU" title="右上方功能區塊" accesskey="U"
                tabindex="2">:::</a>
            <a href="https://iot.wra.gov.tw/WebMap.jsp"><img src="img/webmap.png" alt="webmap" title="網站導覽"></a>
            <div class="btn">
                <ul>
                    <li class="login"><a href="https://iot.wra.gov.tw/Login.jsp">登入</a></li>
                    <li>|</li>
                    <li><a href="https://iot.wra.gov.tw/SignUp.jsp">註冊</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!--選單區-->  
    <!-- navbar -->
    <script src="js/navbar.js"></script>

    <!-- breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <ul>
                <li><a href="https://iot.wra.gov.tw/index.jsp" title="首頁" aria-label="首頁"><i class="fas fa-home"></i></a></li>
                <li>&gt;</li>
                <li><a href="https://iot.wra.gov.tw/DataStatistics.jsp#">開發指引</a></li>
                <li>&gt;</li>
                <li><span>資料使用統計</span></li>
            </ul>
        </div>
    </div>
    <!-- 隱私權保護政策 -->
    <!-- 資料使用統計 -->
    <section class="content-data">
        <div class="container">
            <a href="https://iot.wra.gov.tw/DataStatistics.jsp#C" title="中央內容區塊" id="AC" accesskey="C">:::</a>
            <h1>資料使用統計</h1>
            <h2>API 使用統計</h2>
            <div id="div_Chart_TimeSeries">
                <!-- 為ECharts準備一個具備大小寬高的DOM -->
                <div id="main_TimeSeries"
                    style="width: 100%; height: 400px; -webkit-tap-highlight-color: transparent; user-select: none; position: relative; background: transparent;"
                    _echarts_instance_="ec_1653353493953">
                    <div
                        style="position: relative; overflow: hidden; width: 1140px; height: 400px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;">
                        <canvas width="1425" height="500" data-zr-dom-id="zr_0"
                            style="position: absolute; left: 0px; top: 0px; width: 1140px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
                    </div>
                    <div
                        style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font: 14px / 21px ; padding: 5px; left: 790.4px; top: 40px;">
                        20220523<br><span
                            style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#c23531;"></span>列出縣市代碼:
                        4<br><span
                            style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#2f4554;"></span>列出鄉鎮代碼:
                        1<br><span
                            style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#61a0a8;"></span>列出河川水位站:
                        454<br><span
                            style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#d48265;"></span>列出水系代碼:
                        4<br><span
                            style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#91c7ae;"></span>列出淹水感測器:
                        2,006<br><span
                            style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#749f83;"></span>列出閘門:
                        5</div>
                </div>
                <!-- ECharts单文件引入 -->
            </div>
            <h2>API 使用次數排名(月)</h2>
            <div>
                <select name="Q_Month" id="Q_Month" size="1" onchange="GetSummaryData(this.value);">
                    <option value="202205" selected="">202205</option>
                    <option value="202204">202204</option>
                    <option value="202203">202203</option>
                    <option value="202202">202202</option>
                    <option value="202201">202201</option>
                    <option value="202112">202112</option>
                    <option value="202111">202111</option>
                    <option value="202110">202110</option>
                    <option value="202109">202109</option>
                    <option value="202108">202108</option>
                    <option value="202107">202107</option>
                    <option value="202106">202106</option>
                    <option value="202105">202105</option>
                    <option value="202104">202104</option>
                    <option value="202103">202103</option>
                    <option value="202102">202102</option>
                    <option value="202101">202101</option>
                    <option value="202012">202012</option>
                    <option value="202011">202011</option>
                    <option value="202010">202010</option>
                    <option value="202009">202009</option>
                </select>
            </div>
            <div id="div_Chart_Summary">
                <!-- 為ECharts準備一個具備大小寬高的DOM -->
                <div id="main_Summary"
                    style="width: 100%; height: 400px; -webkit-tap-highlight-color: transparent; user-select: none; position: relative; background: transparent;"
                    _echarts_instance_="ec_1653353493954">
                    <div
                        style="position: relative; overflow: hidden; width: 1140px; height: 400px; padding: 0px; margin: 0px; border-width: 0px;">
                        <canvas width="1425" height="500" data-zr-dom-id="zr_0"
                            style="position: absolute; left: 0px; top: 0px; width: 1140px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
                    </div>
                    <div></div>
                </div>
                <!-- ECharts单文件引入 -->
            </div>

            <div class="chart-gp">
                <div id="lineChart_num" class="line-chart"></div>
            </div>
            <!--img src="img/api-ranking.jpg" alt="API呼叫排名">
            <h2>API呼叫排名</h2-->
        </div>
    </section>
   
    <!-- footer -->
    <script src="js/footer.js"></script>

    <!-- bootstrap -->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- mobile-menu -->
    <script>
        var fas = document.querySelector('.fas.fa-bars')
        var navbar_nav = document.querySelector('.nav.navbar-nav')
        var nav_item = document.querySelector('.nav-item.dropdown')
        fas.onclick = function () {
            if (navbar_nav.classList.contains('active-ul')) {
                navbar_nav.classList.remove('active-ul')
            } else {
                navbar_nav.classList.add('active-ul')
            }
        }
    </script>

    <script type="text/javascript" language="javascript" src="js/jquery.min.js"></script>
    <script src="js/echarts.js"></script>
    <script type="text/javascript" class="init">
        function GetTimeSeries(SDate, EDate) {
            // 基於準備好的 DOM，初始化echarts圖表
            var myChart = echarts.init(document.getElementById('main_TimeSeries'));

            var option = {
                tooltip: {
                    trigger: 'axis',
                    position: function (pt) {
                        return [pt[0], '10%'];
                    }
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                title: {
                    text: '',
                    textStyle: {
                        color: '#0D73AD', //颜色
                        fontStyle: 'normal', //风格
                        fontWeight: 'bolder', //粗细
                        fontFamily: 'Microsoft yahei', //字体
                        fontSize: 16     //大小

                    }
                },
                toolbox: {
                    show: true,
                    x: 'right',
                    y: 'top',
                    feature: {
                        dataView: { show: false, readOnly: false },
                        //restore: {show: false},
                        magicType: {
                            show: true,
                            type: ['line', 'bar'],
                            title: {
                                line: '切換為折線圖',
                                bar: '切換為柱狀圖'
                            }
                        },
                        //saveAsImage: {show: false, title: '保存為圖片'}
                    }
                },
                dataset: {
                    source: [
                        ['product', '2012', '2013', '2014', '2015'],
                        ['Matcha Latte', 41.1, 30.4, 65.1, 53.3],
                        ['Milk Tea', 86.5, 92.1, 85.7, 83.1],
                        ['Cheese Cocoa', 24.1, 67.2, 79.5, 86.4]
                    ]
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: []
                },
                yAxis: {
                    type: 'value',
                    boundaryGap: [0, '100%'],
                    axisLabel: {
                        formatter: '{value}'
                    }
                },
                /*dataZoom: [{
                        type: 'slider',
                        yAxisIndex: 0,
                        orient: 'vertical'
                    }, {
                        type: 'slider',
                        xAxisIndex: 0,
                        orient: 'horizontal'
                    }
                ],*/
                series: [
                    {
                        name: '正常使用率',
                        type: 'line',
                        itemStyle: {
                            normal: {
                                color: ['#ADADFF'],
                                label: {
                                    show: true,
                                    color: ['#000080'],
                                    position: 'top',
                                    formatter: '{c}'
                                }
                            }
                        },
                        data: []
                    },

                ],

            };
            // // 為echarts對象加載數據
            // myChart.setOption(option);
            // //获取数据时显示加载状态图
            // myChart.showLoading();
            // var TimeStamp = [];
            // var Value = [];
            // var API_TimeSeries = [];
            // var TimeStampArr = [];
            // var APIName = [];
            // $.ajax({
            //     type: "post",
            //     //async : true, //异步请求
            //     url: "getTimeSeries_fig.jsp",
            //     data: {
            //         sDt: SDate,
            //         eDt: EDate
            //     },
            //     dataType: "json",
            //     success: function (result) {
            //         TimeStampArr = result.TimeStampArr;
            //         APIName = result.MethodNameArr;
            //         API_TimeSeries = result.API_TimeSeries;
            //         //if (data.status)
            //         {
            //             myChart.hideLoading();    //隐藏加载动画
            //             myChart.setOption({//加载数据图表
            //                 tooltip: {
            //                     trigger: 'axis',
            //                     position: function (pt) {
            //                         return [pt[0], '10%'];
            //                     }
            //                 },
            //                 legend: {
            //                     data: APIName,//['iapi', 'iot','iotmanage']
            //                     x: 'center',
            //                     y: 'top',
            //                     padding: 5,    // [5, 10, 15, 20]
            //                     itemGap: 5,
            //                     textStyle: {
            //                         color: '#0D73AD', //颜色
            //                         fontStyle: 'normal', //风格
            //                         fontWeight: 'bolder', //粗细
            //                         fontFamily: 'Microsoft yahei', //字体
            //                         fontSize: 14     //大小

            //                     }
            //                 },
            //                 toolbox: {
            //                     show: true,
            //                     x: 'right',
            //                     y: 'top',
            //                     feature: {
            //                         //mark : {show: true},
            //                         //dataView: {show: false, readOnly: false},
            //                         dataZoom: {
            //                             //yAxisIndex: 'none'
            //                         },
            //                         //restore: {show: false},
            //                         //magicType: {show: true, type: ['line', 'bar']},
            //                         //saveAsImage: {show: true, title: '保存為圖片'}
            //                     }
            //                 },
            //                 //calculable : true,

            //                 xAxis: [
            //                     {
            //                         type: 'category',
            //                         boundaryGap: [0, '50%'],

            //                         data: TimeStampArr //時間
            //                     }
            //                 ],
            //                 yAxis: {
            //                     type: 'value',
            //                     boundaryGap: [0, '50%'],
            //                     axisLabel: {
            //                         formatter: '{value}'
            //                     }
            //                 }, //注意一定不能丢了这个，不然图表Y轴不显示
            //                 /*dataZoom: [{
            //                         type: 'slider',
            //                         yAxisIndex: 0,
            //                         orient: 'vertical'
            //                     }, {
            //                         type: 'slider',
            //                         xAxisIndex: 0,
            //                         orient: 'horizontal'
            //                     }
            //                 ],*/
            //                 series: API_TimeSeries
            //             });

            //         }

            //     },
            //     error: function (errorMsg) {
            //         //请求失败时执行该函数
            //         alert("圖表請求數據失敗!");
            //         //log(errorMsg);
            //         myChart.hideLoading();
            //     }
            // });

        }
        function GetSummaryData(Month) {
            // 基於準備好的 DOM，初始化echarts圖表
            var myChart = echarts.init(document.getElementById('main_Summary'));
            var option = {
                tooltip: {
                    trigger: 'item',
                    position: function (pt) {
                        return [pt[0], '10%'];
                    }
                },
                title: {
                    text: "",
                    subtext: "",
                    x: 'center'
                },
                toolbox: {
                    show: true,
                    x: 'right',
                    y: 'top',
                    feature: {
                        dataView: { show: false, readOnly: false },
                        //restore: {show: false},
                        //magicType : {show: true, type: ['line', 'bar']},
                        //saveAsImage: {show: true,title:'保存為圖片'}
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },

                series: [
                    {
                        name: 'API 使用次數排名(月)',
                        type: 'pie',
                        radius: '50%',
                        center: ['50%', '50%'],
                        data: []
                    }
                ]

            };
            // // 為echarts對象加載數據
            // myChart.setOption(option);
            // //获取数据时显示加载状态图
            // myChart.showLoading();
            // var CateName = [];
            // var Value = [];
            // var ResultStr = "";

            // $.ajax({
            //     type: "post",
            //     //async : true, //异步请求
            //     url: "getSummary_fig.jsp",
            //     data: {
            //         Q_Month: Month
            //     },
            //     dataType: "json",
            //     success: function (result) {
            //         //alert(result);
            //         //if (data.status)
            //         {

            //             for (var i = 0; i < result.length; i++) {
            //                 Value.push({
            //                     name: result[i]["name"],
            //                     value: result[i]["value"]
            //                 });
            //                 //CateName.push(result[i]["CateName"]);
            //             }

            //             //ResultStr=ResultStr.substring(0,ResultStr.length-1);
            //             myChart.hideLoading();    //隐藏加载动画
            //             myChart.setOption({        //加载数据图表
            //                 tooltip: {
            //                     trigger: 'item',
            //                     position: function (pt) {
            //                         return [pt[0], '10%'];
            //                     }
            //                 },

            //                 toolbox: {
            //                     show: true,
            //                     x: 'right',
            //                     y: 'top',
            //                     feature: {
            //                         //mark : {show: true},
            //                         //dataView: {show: false, readOnly: false},
            //                         //dataZoom: {
            //                         //    yAxisIndex: 'none'
            //                         //},
            //                         //restore: {show: false},
            //                         //magicType : {show: true, type: ['line', 'bar']},
            //                         //saveAsImage: {show: true,title:'保存為圖片'}
            //                     }
            //                 },
            //                 //calculable : true,

            //                 series: [{
            //                     name: 'API呼叫次數排名',
            //                     type: 'pie',
            //                     radius: '80%',
            //                     center: ['50%', '50%'],
            //                     data: Value,
            //                     itemStyle: {
            //                         emphasis: {
            //                             shadowBlur: 10,
            //                             shadowOffsetX: 0,
            //                             shadowColor: 'rgba(0, 0, 0, 0.5)'
            //                         }
            //                     }
            //                 }]
            //             });
            //         }

            //     },
            //     error: function (errorMsg) {
            //         //请求失败时执行该函数
            //         alert("無數據可顯示!");
            //         myChart.hideLoading();
            //     }
            // });
        }
        // GetTimeSeries('2022/05/17', '2022/05/24'); GetSummaryData('202205')
    </script>

    <script>
        // 總申請件數
        var lineChart_num = echarts.init(document.getElementById('lineChart_num'));
        option = {
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'none' }
            },
            legend: {},
            xAxis: [
                {
                    type: 'category',
                    axisTick: {
                        alignWithLabel: true
                    },
                    axisLabel: {
                        formatter: '{value} 年度'
                    },
                    data: [
                        '全部',
                        '109',
                        '110',
                        '111',
                    ]
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    position: 'left',
                    axisLabel: {
                        formatter: '{value} 件'
                    }
                }
            ],
            series: [
                {
                    name: '總申請件數',
                    type: 'bar',
                    data: [1000, 300, 200, 500],
                },
                {
                    name: '核定件數',
                    type: 'line',
                    data: [
                        480,
                        100,
                        80,
                        300,
                    ]
                }
            ]
        };

        lineChart_num.setOption(option);


    </script>
</body>

</html>